--BEGIN TRANSACTION;

DROP TABLE IF EXISTS TB_AGENDAMENTO;
DROP TABLE IF EXISTS TB_CLIENTE;
DROP TABLE IF EXISTS TB_FUNCIONARIO;
DROP TABLE IF EXISTS TB_SERVICOS;
DROP TABLE IF EXISTS TB_STATUS;
DROP TABLE IF EXISTS TB_UNIDADE;

CREATE TABLE TB_UNIDADE (
	ID_UNIDADE		INTEGER PRIMARY KEY AUTOINCREMENT,
	NOME_UNIDADE	VARCHAR(30) NOT NULL
);

CREATE TABLE TB_STATUS (
	ID_STATUS		INTEGER PRIMARY KEY AUTOINCREMENT,
	STATUS_AGEND	VARCHAR(15) NOT NULL
);

CREATE TABLE TB_SERVICOS (
	ID_SERVICO		INTEGER PRIMARY KEY AUTOINCREMENT,
	TIPO_SERVICO	VARCHAR(20) NOT NULL
);

CREATE TABLE TB_FUNCIONARIO (
	ID_FUNC				INTEGER PRIMARY KEY AUTOINCREMENT,
	ID_UNIDADE			INT NOT NULL,
	NOME_FUNC			VARCHAR(30) NOT NULL,
	CPF_FUNC			VARCHAR(15) NULL UNIQUE,
	RG_FUNC				VARCHAR(15)NOT NULL,
	TELEFONE_FUNC		VARCHAR(15)NOT NULL,
	HORA_INICIO_FUNC	TIME(7)NOT NULL,
	HORA_FIM_FUNC		TIME(7)NOT NULL,
	CONSTRAINT FK_ID_UNIDADE FOREIGN KEY (ID_UNIDADE) REFERENCES TB_UNIDADE(ID_UNIDADE)
);

CREATE TABLE TB_CLIENTE (
	ID_CLIENTE		INTEGER PRIMARY KEY AUTOINCREMENT,
	NOME_CLI		VARCHAR(30) NOT NULL,
	TELEFONE_CLI	VARCHAR(15)NOT NULL,
	CPF_CLI			VARCHAR(15) NOT NULL UNIQUE
);

CREATE TABLE TB_AGENDAMENTO (
	ID_AGENDAMENTO		INTEGER PRIMARY KEY AUTOINCREMENT,
	ID_FUNC				INT NOT NULL,
	ID_CLIENTE			INT NOT NULL,
	ID_STATUS			INT NOT NULL,
	ID_SERVICO			INT NOT NULL,
	DATA_AGENDAMENTO	DATE NOT NULL,
	HORA_INICIO_AGEND	TIME(7)NOT NULL,
	HORA_FIM_AGEND		TIME(7)NOT NULL,
	CONSTRAINT FK_FUNCIONARIO FOREIGN KEY(ID_FUNC) REFERENCES TB_FUNCIONARIO(ID_FUNC),
	CONSTRAINT FK_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES TB_CLIENTE(ID_CLIENTE),
	CONSTRAINT FK_STATUS FOREIGN KEY (ID_STATUS) REFERENCES TB_STATUS(ID_STATUS),
	CONSTRAINT FK_SERVICO FOREIGN KEY (ID_SERVICO) REFERENCES TB_SERVICOS(ID_SERVICO)
);

INSERT INTO `TB_UNIDADE` (ID_UNIDADE,NOME_UNIDADE)
	VALUES (1,'SANTO AMARO'), (2,'BERRINI'), (3,'PINHEIROS');
	
INSERT INTO `TB_STATUS` (ID_STATUS,STATUS_AGEND)
	VALUES (1,'AGENDADO'), (2,'ATENDIDO'), (3,'CANCELADO'), (4,'ESPERA');
	
INSERT INTO `TB_SERVICOS` (ID_SERVICO,TIPO_SERVICO) 
  VALUES (1,'CORTE'),  (2,'BARBA');
	
INSERT INTO `TB_FUNCIONARIO` (ID_FUNC,ID_UNIDADE,NOME_FUNC,CPF_FUNC,RG_FUNC,TELEFONE_FUNC,HORA_INICIO_FUNC,HORA_FIM_FUNC) 
  VALUES (1,1,'CHAVES','31974047857','325794777','976227960','10:00','19:00'),
 				(2,2,'HENRIQUE','24024024024','242424240','242424240','07:00','16:00'),
 				(3,2,'NINAO','37765289829','347055990','56214658','09:00','18:00'),
 				(4,3,'BOZO','01234567890','098765432','15973085','07:00','22:00');

INSERT INTO `TB_CLIENTE` (ID_CLIENTE,NOME_CLI,TELEFONE_CLI,CPF_CLI) 
  VALUES (1,'BRUCE WAYNE','11112233445','96796485831'),
 				(2,'TONY STARK','11223344556','42420780051'),
 				(3,'BRUCE BANNER','11334455667','34705599000'),
 				(4,'CLARK KENT','11445566778','42147516805'),
 				(5,'PETER PARKER','11556677889','37294284890'),
 				(6,'MARTY MCFLY','11667788990','26164345120'),
				(7,'CHEWBACCA','11778899001','86329714339');

INSERT INTO `TB_AGENDAMENTO` (ID_AGENDAMENTO,ID_FUNC,ID_CLIENTE,ID_STATUS,ID_SERVICO,DATA_AGENDAMENTO,HORA_INICIO_AGEND,HORA_FIM_AGEND) 
	VALUES (1,1,1,1,2,'14/06/2016','13:00','14:00'),
 			(2,1,5,3,1,'14/06/2016','14:00','15:00'),
 			(3,2,2,1,2,'14/06/2016','08:00','09:00'),
 			(4,3,3,2,1,'14/06/2016','12:00','13:00'),
 			(5,2,6,4,1,'14/06/2016','08:30','09:00'),
 			(6,4,6,1,2,'14/06/2016','08:30','09:00'),
 			(7,4,7,1,1,'14/06/2016','13:00','20:00');

COMMIT;